import{t as S,b as o,c as j}from"../chunks/G-XDyB1t.js";import{M as Ua,B as Xa,O as Ya,h as Za,p as ka,c as r,s as z,r as s,K as ua,b as Ia,J as C,e as c,P as B,Q as Qa,z as qa,d as n,$ as $a,n as Na}from"../chunks/DeCAPg0_.js";import{l as ae,s as J,d as Ra,e as Ma}from"../chunks/cuc9Tl5J.js";import{i as g}from"../chunks/Dsp-R_JF.js";import{e as Ta,h as p,R as ee,i as Wa,T as te,H as re,a as se,L as ie,S as le,F as oe,C as ce,P as ne,b as ve,c as fe,d as de,f as ue,g as me,j as _e,k as ge,l as ye,E as he,W as xe,N as be}from"../chunks/BkZ2-yXf.js";import{r as we}from"../chunks/Bf7bsP5n.js";function pe(t,a,d=a){var _=Ua();ae(t,"input",f=>{var l=f?t.defaultValue:t.value;if(l=za(t)?Sa(l):l,d(l),_&&l!==(l=a())){var E=t.selectionStart,M=t.selectionEnd;t.value=l??"",M!==null&&(t.selectionStart=E,t.selectionEnd=Math.min(M,t.value.length))}}),(Za&&t.defaultValue!==t.value||Xa(a)==null&&t.value)&&d(za(t)?Sa(t.value):t.value),Ya(()=>{var f=a();za(t)&&f===Sa(t.value)||t.type==="date"&&!f&&!t.value||f!==t.value&&(t.value=f??"")})}function za(t){var a=t.type;return a==="number"||a==="range"}function Sa(t){return t===""?null:+t}var De=S('<div class="flex items-center justify-between py-3"><div class="flex items-center space-x-4"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-[#f3f1ef]"><!></div> <div><p class="font-semibold"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="text-right"><p class="font-medium"> </p> <div class="flex items-center justify-end space-x-2 text-sm text-gray-500"><!> <span> </span></div></div></div>'),Ne=S('<div class="py-3 text-center text-gray-500">No forecast data available</div>'),ze=S('<div class="w-full max-w-md overflow-hidden rounded-xl bg-white shadow-md border border-[#ccc3b9]"><div class="bg-[#ccc3b9] p-4 text-gray-800"><h2 class="text-xl font-bold">5-Day Forecast</h2> <p class="text-gray-600"> </p></div> <div class="p-4"><div class="divide-y divide-gray-200"><!></div></div></div>');function Se(t,a){ka(a,!0);function d(u){return u===void 0?"N/A":`${u}Â°C`}function _(u){if(!u)return"N/A";const y={weekday:"long"};return new Date(u).toLocaleDateString(void 0,y)}function f(u){if(!u)return"";const y=new Date(u),v={month:"short",day:"numeric"};return y.toLocaleDateString(void 0,v)}function l(u,y,v,i=50){return y>7||v>75?"heavy-rain":y>3||v>50?"rain":y>.5||v>30?"light-rain":u<0?"snow":i>80?"cloudy":i>50?"partly-cloudy":u>28?"hot":"sun"}var E=ze(),M=r(E),G=z(r(M),2),ea=r(G,!0);s(G),s(M);var W=z(M,2),H=r(W),O=r(H);{var P=u=>{var y=j(),v=C(y);Ta(v,17,()=>a.forecastData.daily.time,Wa,(i,m,e)=>{var R=j(),k=C(R);{var h=D=>{var I=De(),N=r(I),x=r(N),T=r(x);{var A=V=>{var K=j(),ra=C(K);p(ra,()=>te({size:24,className:"text-[#8c7e6f]"})),o(V,K)},L=(V,K)=>{{var ra=U=>{var la=j(),ga=C(la);p(ga,()=>re({size:24,className:"text-[#8c7e6f]"})),o(U,la)},_a=(U,la)=>{{var ga=X=>{var oa=j(),ya=C(oa);p(ya,()=>se({size:24,className:"text-[#8c7e6f]"})),o(X,oa)},Pa=(X,oa)=>{{var ya=Y=>{var ca=j(),ha=C(ca);p(ha,()=>ie({size:24,className:"text-[#8c7e6f]"})),o(Y,ca)},Aa=(Y,ca)=>{{var ha=Z=>{var na=j(),xa=C(na);p(xa,()=>le({size:24,className:"text-[#8c7e6f]"})),o(Z,na)},Oa=(Z,na)=>{{var xa=Q=>{var va=j(),ba=C(va);p(ba,()=>oe({size:24,className:"text-[#8c7e6f]"})),o(Q,va)},Va=(Q,va)=>{{var ba=q=>{var fa=j(),wa=C(fa);p(wa,()=>ce({size:24,className:"text-[#8c7e6f]"})),o(q,fa)},Ga=(q,fa)=>{{var wa=$=>{var da=j(),pa=C(da);p(pa,()=>ne({size:24,className:"text-[#8c7e6f]"})),o($,da)},Ja=($,da)=>{{var pa=aa=>{var sa=j(),Da=C(sa);p(Da,()=>ve({size:24,className:"text-[#8c7e6f]"})),o(aa,sa)},Ka=aa=>{var sa=j(),Da=C(sa);p(Da,()=>fe({size:24,className:"text-[#8c7e6f]"})),o(aa,sa)};g($,aa=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="hot"?aa(pa):aa(Ka,!1)},da)}};g(q,$=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="partly-cloudy"?$(wa):$(Ja,!1)},fa)}};g(Q,q=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="cloudy"||l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="overcast"?q(ba):q(Ga,!1)},va)}};g(Z,Q=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="fog"?Q(xa):Q(Va,!1)},na)}};g(Y,Z=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="snow"?Z(ha):Z(Oa,!1)},ca)}};g(X,Y=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="light-rain"?Y(ya):Y(Aa,!1)},oa)}};g(U,X=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="rain"?X(ga):X(Pa,!1)},la)}};g(V,U=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="heavy-rain"?U(ra):U(_a,!1)},K)}};g(T,V=>{l(a.forecastData.daily.temperature_2m_max[e],a.forecastData.daily.precipitation_sum[e],a.forecastData.daily.precipitation_probability_max[e])==="thunderstorm"?V(A):V(L,!1)})}s(x);var b=z(x,2),w=r(b),F=r(w,!0);s(w);var ia=z(w,2),Fa=r(ia,!0);s(ia),s(b),s(N);var La=z(N,2),ma=r(La),Ba=r(ma);s(ma);var ja=z(ma,2),Ca=r(ja);p(Ca,()=>ee({size:16,className:"text-gray-500"}));var Ea=z(Ca,2),Ha=r(Ea);s(Ea),s(ja),s(La),s(I),ua((V,K,ra,_a)=>{J(F,V),J(Fa,K),J(Ba,`${ra??""} / 
                                    ${_a??""}`),J(Ha,`${a.forecastData.daily.precipitation_probability_max[e]??""}%`)},[()=>_(c(m)),()=>f(c(m)),()=>d(a.forecastData.daily.temperature_2m_max[e]),()=>d(a.forecastData.daily.temperature_2m_min[e])]),o(D,I)};g(k,D=>{e<5&&D(h)})}o(i,R)}),o(u,y)},ta=u=>{var y=Ne();o(u,y)};g(O,u=>{a.forecastData&&a.forecastData.daily&&a.forecastData.daily.time?u(P):u(ta,!1)})}s(H),s(W),s(E),ua(()=>J(ea,a.forecastData.locationName||"Location")),o(t,E),Ia()}function ke(t,a,d,_){if(c(a).trim()){const f=c(a).includes(",")?c(a).split(",")[0].trim():c(a).trim();d.onSearch(f),n(_,!1)}}var Ie=t=>t.preventDefault(),Le=S('<li class="px-4 py-2 text-gray-500 text-center">Loading suggestions...</li>'),je=S('<li class="px-4 py-2 text-gray-500 text-center">No locations found</li>'),Ce=(t,a,d)=>a(c(d)),Ee=S('<button class="w-full text-left px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center" role="option" aria-selected="false"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg> </button>'),Me=S('<div class="absolute mt-1 w-full rounded-md border border-gray-300 bg-white shadow-lg z-10" role="listbox" tabindex="0"><ul class="max-h-60 overflow-auto py-1"><!></ul></div>'),Re=S('<div class="relative"><div class="flex items-center"><div class="relative flex w-full"><input type="text" placeholder="Search locations..." class="w-full rounded-lg border border-[#b8afa5] bg-[#f3f1ef] py-2 pl-3 pr-10 shadow-sm focus:border-[#a69c91] focus:outline-none focus:ring-1 focus:ring-[#a69c91]"> <button class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-600 hover:text-gray-800" aria-label="Search locations"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <!></div>');function Te(t,a){ka(a,!0);let d=B(""),_=B(!1),f=B(Qa([])),l=B(!1);function E(v,i){let m;return function(...e){clearTimeout(m),m=setTimeout(()=>v.apply(this,e),i)}}const M=E(async v=>{if(!v||v.trim().length<2){n(f,[],!0);return}n(l,!0);try{const i=await de(v);n(f,i,!0)}catch(i){console.error("Error fetching suggestions:",i),n(f,[],!0)}finally{n(l,!1)}},300);qa(()=>{c(d).trim().length>=2?(n(_,!0),M(c(d))):(n(_,!1),n(f,[],!0))});function G(v){const i=v.split(",")[0].trim();n(d,v,!0),n(_,!1),n(f,[],!0),a.onSearch(i)}function ea(){n(_,!1)}var W=Re();Ma("mousedown",$a,ea);var H=r(W),O=r(H),P=r(O);we(P);var ta=z(P,2);ta.__click=[ke,d,a,_],s(O),s(H);var u=z(H,2);{var y=v=>{var i=Me();i.__mousedown=[Ie];var m=r(i),e=r(m);{var R=h=>{var D=Le();o(h,D)},k=(h,D)=>{{var I=x=>{var T=je();o(x,T)},N=x=>{var T=j(),A=C(T);Ta(A,17,()=>c(f),Wa,(L,b)=>{var w=Ee();w.__mousedown=[Ce,G,b];var F=z(r(w));s(w),ua(()=>J(F,` ${c(b)??""}`)),o(L,w)}),o(x,T)};g(h,x=>{c(f).length===0?x(I):x(N,!1)},D)}};g(e,h=>{c(l)?h(R):h(k,!1)})}s(m),s(i),o(v,i)};g(u,v=>{c(_)&&(c(f).length>0||c(l))&&v(y)})}s(W),Ma("focus",P,()=>{c(d).trim().length>0&&n(_,!0)}),pe(P,()=>c(d),v=>n(d,v)),o(t,W),Ia()}Ra(["click","mousedown"]);var We=S('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg text-center"><!> <h3 class="mt-4 text-xl font-medium text-gray-900">Search for a location</h3> <p class="mt-2 text-gray-600">Enter a city name and click search or select from suggestions</p></div></div>'),Fe=S('<div class="mt-8 flex justify-center"><div class="rounded-xl bg-white p-10 shadow-lg"><div class="flex items-center space-x-4"><!> <span class="text-lg font-medium text-gray-700">Loading weather data...</span></div></div></div>'),Be=(t,a,d)=>a(c(d)),He=S('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg"><div class="flex flex-col items-center text-red-500"><!> <span class="text-lg font-medium text-center"> </span></div> <div class="mt-6 flex justify-center"><button class="rounded-md bg-blue-500 px-6 py-2 text-white hover:bg-blue-600 transition-colors">Try again</button></div></div></div>'),Pe=S('<div class="mt-8 grid gap-6 lg:grid-cols-2 lg:gap-8"><!> <!></div>'),Ae=S('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg text-center"><!> <span class="mt-4 block text-lg font-medium text-gray-700">No weather data available</span></div></div>'),Oe=S('<div class="h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-gray-100 p-4 sm:p-6"><div class="mx-auto max-w-6xl"><div class="mb-6 flex justify-center"><div class="w-full max-w-md"><!></div></div> <!></div></div>');function Ye(t,a){ka(a,!0);let d=B(""),_=B(null),f=B(null),l=B(!1),E=B(""),M=B(!1);async function G(i){if(i.trim()){n(d,i,!0),n(l,!0),n(E,""),n(M,!0);try{const m=await ue(i);if(!m.results||m.results.length===0)throw new Error("Location not found");const e=m.results[0],{latitude:R,longitude:k}=e,[h,D]=await Promise.all([me(k,R),_e(k,R)]),I={locationName:e.name,country:e.country,admin:e.admin1};n(_,{...h,...I},!0),n(f,{...D,...I},!0)}catch(m){console.error("Error fetching weather data:",m),n(E,"Could not load weather data. Please try again."),n(_,null),n(f,null)}finally{n(l,!1)}}}function ea(i){G(i)}var W=Oe(),H=r(W),O=r(H),P=r(O),ta=r(P);Te(ta,{onSearch:ea}),s(P),s(O);var u=z(O,2);{var y=i=>{var m=We(),e=r(m),R=r(e);p(R,()=>ge({size:64,className:"mx-auto text-blue-400"})),Na(4),s(e),s(m),o(i,m)},v=(i,m)=>{{var e=k=>{var h=Fe(),D=r(h),I=r(D),N=r(I);p(N,()=>ye({size:40,className:"animate-spin text-blue-500"})),Na(2),s(I),s(D),s(h),o(k,h)},R=(k,h)=>{{var D=N=>{var x=He(),T=r(x),A=r(T),L=r(A);p(L,()=>he({size:48,className:"mb-3"}));var b=z(L,2),w=r(b,!0);s(b),s(A);var F=z(A,2),ia=r(F);ia.__click=[Be,G,d],s(F),s(T),s(x),ua(()=>J(w,c(E))),o(N,x)},I=(N,x)=>{{var T=L=>{var b=Pe(),w=r(b);xe(w,{get weatherData(){return c(_)}});var F=z(w,2);Se(F,{get forecastData(){return c(f)}}),s(b),o(L,b)},A=L=>{var b=Ae(),w=r(b),F=r(w);p(F,()=>be({size:48,className:"mx-auto text-gray-400"})),Na(2),s(w),s(b),o(L,b)};g(N,L=>{c(_)?L(T):L(A,!1)},x)}};g(k,N=>{c(E)?N(D):N(I,!1)},h)}};g(i,k=>{c(l)?k(e):k(R,!1)},m)}};g(u,i=>{c(M)?i(v,!1):i(y)})}s(H),s(W),o(t,W),Ia()}Ra(["click"]);export{Ye as component};
