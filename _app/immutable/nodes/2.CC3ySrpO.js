import{t as g,a as d,c as na}from"../chunks/bosq3E9J.js";import{M as Na,B as ja,O as za,h as Ca,p as ca,c as e,s as S,r,K as ta,a as da,J as va,g as o,P as W,Q as Ea,z as Ta,b as l,$ as Ia,n as ia}from"../chunks/DeD-1l9g.js";import{l as Ma,s as V,d as ha,e as _a}from"../chunks/CZ11dQNa.js";import{i as j}from"../chunks/BMZeULnT.js";import{e as ya,h as Q,R as Wa,i as xa,T as Pa,a as Ra,S as Ba,P as Fa,b as Aa,c as Oa,d as Va,g as Ga,f as Ja,j as Ka,L as Ha,E as Ua,W as Xa,N as Ya}from"../chunks/Ctmu58YV.js";import{s as Z,r as Za}from"../chunks/kbNZoB4h.js";function Qa(t,a,c=a){var _=Na();Ma(t,"input",n=>{var u=n?t.defaultValue:t.value;if(u=oa(t)?la(u):u,c(u),_&&u!==(u=a())){var z=t.selectionStart,C=t.selectionEnd;t.value=u??"",C!==null&&(t.selectionStart=z,t.selectionEnd=Math.min(C,t.value.length))}}),(Ca&&t.defaultValue!==t.value||ja(a)==null&&t.value)&&c(oa(t)?la(t.value):t.value),za(()=>{var n=a();oa(t)&&n===la(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function oa(t){var a=t.type;return a==="number"||a==="range"}function la(t){return t===""?null:+t}var qa=g('<img alt="Thunderstorm" width="24" height="24">'),$a=g('<img alt="Rain" width="24" height="24">'),at=g('<img alt="Snow" width="24" height="24">'),tt=g('<img alt="Partly Cloudy" width="24" height="24">'),et=g('<img alt="Sunny" width="24" height="24">'),rt=g('<div class="flex items-center justify-between py-3"><div class="flex items-center space-x-4"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-[#f3f1ef]"><!></div> <div><p class="font-semibold"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="text-right"><p class="font-medium"> </p> <div class="flex items-center justify-end space-x-2 text-sm text-gray-500"><!> <span> </span></div></div></div>'),st=g('<div class="py-3 text-center text-gray-500">No forecast data available</div>'),it=g('<div class="w-full max-w-md overflow-hidden rounded-xl bg-white shadow-md border border-[#ccc3b9]"><div class="bg-[#ccc3b9] p-4 text-gray-800"><h2 class="text-xl font-bold">5-Day Forecast</h2> <p class="text-gray-600"> </p></div> <div class="p-4"><div class="divide-y divide-gray-200"><!></div></div></div>');function ot(t,a){ca(a,!0);function c(f){return f===void 0?"N/A":`${f}Â°C`}function _(f){if(!f)return"N/A";const b={weekday:"long"};return new Date(f).toLocaleDateString(void 0,b)}function n(f){if(!f)return"";const b=new Date(f),v={month:"short",day:"numeric"};return b.toLocaleDateString(void 0,v)}function u(f,b,v,i=50){return b>5||v>70?"thunderstorm":b>.1||v>30?"rain":f<2?"snow":i>40?"partly-cloudy":"sunny"}var z=it(),C=e(z),O=S(e(C),2),U=e(O,!0);r(O),r(C);var I=S(C,2),P=e(I),F=e(P);{var R=f=>{var b=na(),v=va(b);ya(v,17,()=>a.forecastData.daily.time,xa,(i,m,s)=>{var E=na(),k=va(E);{var h=p=>{var L=rt(),D=e(L),y=e(D),T=e(y);{var B=A=>{var G=qa();Z(G,"src",Pa),d(A,G)},N=(A,G)=>{{var ra=J=>{var $=$a();Z($,"src",Ra),d(J,$)},sa=(J,$)=>{{var Da=K=>{var aa=at();Z(aa,"src",Ba),d(K,aa)},Sa=(K,aa)=>{{var ka=H=>{var Y=tt();Z(Y,"src",Fa),d(H,Y)},La=H=>{var Y=et();Z(Y,"src",Aa),d(H,Y)};j(K,H=>{u(a.forecastData.daily.temperature_2m_max[s],a.forecastData.daily.precipitation_sum[s],a.forecastData.daily.precipitation_probability_max[s])==="partly-cloudy"?H(ka):H(La,!1)},aa)}};j(J,K=>{u(a.forecastData.daily.temperature_2m_max[s],a.forecastData.daily.precipitation_sum[s],a.forecastData.daily.precipitation_probability_max[s])==="snow"?K(Da):K(Sa,!1)},$)}};j(A,J=>{u(a.forecastData.daily.temperature_2m_max[s],a.forecastData.daily.precipitation_sum[s],a.forecastData.daily.precipitation_probability_max[s])==="rain"?J(ra):J(sa,!1)},G)}};j(T,A=>{u(a.forecastData.daily.temperature_2m_max[s],a.forecastData.daily.precipitation_sum[s],a.forecastData.daily.precipitation_probability_max[s])==="thunderstorm"?A(B):A(N,!1)})}r(y);var x=S(y,2),w=e(x),M=e(w,!0);r(w);var q=S(w,2),wa=e(q,!0);r(q),r(x),r(D);var ua=S(D,2),ea=e(ua),ba=e(ea);r(ea);var fa=S(ea,2),ma=e(fa);Q(ma,()=>Wa({size:16,className:"text-gray-500"}));var ga=S(ma,2),pa=e(ga);r(ga),r(fa),r(ua),r(L),ta((A,G,ra,sa)=>{V(M,A),V(wa,G),V(ba,`${ra??""} / 
                                    ${sa??""}`),V(pa,`${a.forecastData.daily.precipitation_probability_max[s]??""}%`)},[()=>_(o(m)),()=>n(o(m)),()=>c(a.forecastData.daily.temperature_2m_max[s]),()=>c(a.forecastData.daily.temperature_2m_min[s])]),d(p,L)};j(k,p=>{s<5&&p(h)})}d(i,E)}),d(f,b)},X=f=>{var b=st();d(f,b)};j(F,f=>{a.forecastData&&a.forecastData.daily&&a.forecastData.daily.time?f(R):f(X,!1)})}r(P),r(I),r(z),ta(()=>V(U,a.forecastData.locationName||"Location")),d(t,z),da()}function lt(t,a,c,_){if(o(a).trim()){const n=o(a).includes(",")?o(a).split(",")[0].trim():o(a).trim();c.onSearch(n),l(_,!1)}}var nt=t=>t.preventDefault(),vt=g('<li class="px-4 py-2 text-gray-500 text-center">Loading suggestions...</li>'),ct=g('<li class="px-4 py-2 text-gray-500 text-center">No locations found</li>'),dt=(t,a,c)=>a(o(c)),ut=g('<button class="w-full text-left px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center" role="option" aria-selected="false"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg> </button>'),ft=g('<div class="absolute mt-1 w-full rounded-md border border-gray-300 bg-white shadow-lg z-10" role="listbox" tabindex="0"><ul class="max-h-60 overflow-auto py-1"><!></ul></div>'),mt=g('<div class="relative"><div class="flex items-center"><div class="relative flex w-full"><input type="text" placeholder="Search locations..." class="w-full rounded-lg border border-[#b8afa5] bg-[#f3f1ef] py-2 pl-3 pr-10 shadow-sm focus:border-[#a69c91] focus:outline-none focus:ring-1 focus:ring-[#a69c91]"> <button class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-600 hover:text-gray-800" aria-label="Search locations"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div> <!></div>');function gt(t,a){ca(a,!0);let c=W(""),_=W(!1),n=W(Ea([])),u=W(!1);function z(v,i){let m;return function(...s){clearTimeout(m),m=setTimeout(()=>v.apply(this,s),i)}}const C=z(async v=>{if(!v||v.trim().length<2){l(n,[],!0);return}l(u,!0);try{const i=await Oa(v);l(n,i,!0)}catch(i){console.error("Error fetching suggestions:",i),l(n,[],!0)}finally{l(u,!1)}},300);Ta(()=>{o(c).trim().length>=2?(l(_,!0),C(o(c))):(l(_,!1),l(n,[],!0))});function O(v){const i=v.split(",")[0].trim();l(c,v,!0),l(_,!1),l(n,[],!0),a.onSearch(i)}function U(){l(_,!1)}var I=mt();_a("mousedown",Ia,U);var P=e(I),F=e(P),R=e(F);Za(R);var X=S(R,2);X.__click=[lt,c,a,_],r(F),r(P);var f=S(P,2);{var b=v=>{var i=ft();i.__mousedown=[nt];var m=e(i),s=e(m);{var E=h=>{var p=vt();d(h,p)},k=(h,p)=>{{var L=y=>{var T=ct();d(y,T)},D=y=>{var T=na(),B=va(T);ya(B,17,()=>o(n),xa,(N,x)=>{var w=ut();w.__mousedown=[dt,O,x];var M=S(e(w));r(w),ta(()=>V(M,` ${o(x)??""}`)),d(N,w)}),d(y,T)};j(h,y=>{o(n).length===0?y(L):y(D,!1)},p)}};j(s,h=>{o(u)?h(E):h(k,!1)})}r(m),r(i),d(v,i)};j(f,v=>{o(_)&&(o(n).length>0||o(u))&&v(b)})}r(I),_a("focus",R,()=>{o(c).trim().length>0&&l(_,!0)}),Qa(R,()=>o(c),v=>l(c,v)),d(t,I),da()}ha(["click","mousedown"]);var _t=g('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg text-center"><!> <h3 class="mt-4 text-xl font-medium text-gray-900">Search for a location</h3> <p class="mt-2 text-gray-600">Enter a city name and click search or select from suggestions</p></div></div>'),ht=g('<div class="mt-8 flex justify-center"><div class="rounded-xl bg-white p-10 shadow-lg"><div class="flex items-center space-x-4"><!> <span class="text-lg font-medium text-gray-700">Loading weather data...</span></div></div></div>'),yt=(t,a,c)=>a(o(c)),xt=g('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg"><div class="flex flex-col items-center text-red-500"><!> <span class="text-lg font-medium text-center"> </span></div> <div class="mt-6 flex justify-center"><button class="rounded-md bg-blue-500 px-6 py-2 text-white hover:bg-blue-600 transition-colors">Try again</button></div></div></div>'),wt=g('<div class="mt-8 grid gap-6 lg:grid-cols-2 lg:gap-8"><!> <!></div>'),bt=g('<div class="mt-8 flex justify-center"><div class="max-w-lg rounded-xl bg-white p-10 shadow-lg text-center"><!> <span class="mt-4 block text-lg font-medium text-gray-700">No weather data available</span></div></div>'),pt=g('<div class="h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-gray-100 p-4 sm:p-6"><div class="mx-auto max-w-6xl"><div class="mb-6 flex justify-center"><div class="w-full max-w-md"><!></div></div> <!></div></div>');function zt(t,a){ca(a,!0);let c=W(""),_=W(null),n=W(null),u=W(!1),z=W(""),C=W(!1);async function O(i){if(i.trim()){l(c,i,!0),l(u,!0),l(z,""),l(C,!0);try{const m=await Va(i);if(!m.results||m.results.length===0)throw new Error("Location not found");const s=m.results[0],{latitude:E,longitude:k}=s,[h,p]=await Promise.all([Ga(k,E),Ja(k,E)]),L={locationName:s.name,country:s.country,admin:s.admin1};l(_,{...h,...L},!0),l(n,{...p,...L},!0)}catch(m){console.error("Error fetching weather data:",m),l(z,"Could not load weather data. Please try again."),l(_,null),l(n,null)}finally{l(u,!1)}}}function U(i){O(i)}var I=pt(),P=e(I),F=e(P),R=e(F),X=e(R);gt(X,{onSearch:U}),r(R),r(F);var f=S(F,2);{var b=i=>{var m=_t(),s=e(m),E=e(s);Q(E,()=>Ka({size:64,className:"mx-auto text-blue-400"})),ia(4),r(s),r(m),d(i,m)},v=(i,m)=>{{var s=k=>{var h=ht(),p=e(h),L=e(p),D=e(L);Q(D,()=>Ha({size:40,className:"animate-spin text-blue-500"})),ia(2),r(L),r(p),r(h),d(k,h)},E=(k,h)=>{{var p=D=>{var y=xt(),T=e(y),B=e(T),N=e(B);Q(N,()=>Ua({size:48,className:"mb-3"}));var x=S(N,2),w=e(x,!0);r(x),r(B);var M=S(B,2),q=e(M);q.__click=[yt,O,c],r(M),r(T),r(y),ta(()=>V(w,o(z))),d(D,y)},L=(D,y)=>{{var T=N=>{var x=wt(),w=e(x);Xa(w,{get weatherData(){return o(_)}});var M=S(w,2);ot(M,{get forecastData(){return o(n)}}),r(x),d(N,x)},B=N=>{var x=bt(),w=e(x),M=e(w);Q(M,()=>Ya({size:48,className:"mx-auto text-gray-400"})),ia(2),r(w),r(x),d(N,x)};j(D,N=>{o(_)?N(T):N(B,!1)},y)}};j(k,D=>{o(z)?D(p):D(L,!1)},h)}};j(i,k=>{o(u)?k(s):k(E,!1)},m)}};j(f,i=>{o(C)?i(v,!1):i(b)})}r(P),r(I),d(t,I),da()}ha(["click"]);export{zt as component};
